<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="generator" content="crtools {{version}}" />
   
    <title>{{clan.name}} Clan Dashboard | crtools</title>

    <link rel="icon" href="favicon.ico"/>
    {% if config.www.canonical_url != False %}
    <link rel="canonical" href="{{config.www.canonical_url}}" />
    {% endif %}
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700|Open+Sans:300,300i,700,700i">
    <link rel="stylesheet" href="static/normalize.css">
    <link rel="stylesheet" href="static/crtools.css?version={{version}}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.2/gh-fork-ribbon.min.css" />
</head>
<body>
    <header><div class="inner">
        <h1>{{clan.name}} Clan Dashboard</h1>
    </div></header>
    <main>
        <section id="hero">
            <div id="clan-description">
                {{clan_description}}
            </div>
            <div id="clan-stats">
                <div class="table-wrap">
                <table>
                    <thead>
                        <tr>
                            <th colspan="2">Clan Stats</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><th>Clan Name</th><td>{{clan.name}}</td></tr>
                        <tr><th>Clan Tag</th><td>{{clan.tag}}</td></tr>
                        <tr><th>Clan Score</th><td>{{clan.clanScore}}</td></tr>
                        <tr><th>War Trophies</th><td>{{clan.clanWarTrophies}}</td></tr>
                        <tr><th>Required Trophies</th><td>{{clan.requiredTrophies}}</td></tr>
                        <tr><th>Weekly donations</th><td>{{clan.donationsPerWeek}}</td></tr>
                    </tbody>
                </table>
                </div>
                <em>Last update: {{update_date}}</em>
            </div>
        </section>
        <section id="members">
            <article>
                <header>
                    <h2>Member list <span class="no-mobile">and stats</span></h2>
                    <div class="filters">
                        <label>
                            Filter:
                            <select id="member-filter">
                                <option value="none">None</option>
                                <option value="leadership">Leadership</option>
                                <option value="danger">In danger</option>
                            </select>
                        </label>
                    </div>
                </header>
                {{member_table}}
            </article>

            <div class="row">
                <article id="suggestions">
                    <header>
                        <h2>Suggested actions for leadership:</h2>
                    </header>
                    <ul>
                    {% for suggestion in suggestions %}
                        <li>{{suggestion}}</li>
                    {% endfor %}
                    </ul>
                    <hr />
                    <p>
                        Score for each individual is derived from war participation and 
                        donations. Anyone with a <strong class="bad">score below 0</strong> will be recommended for 
                        kicking and demotion, depending on the number of people in the clan.
                    </p>
                    <p>
                        A member who achieves <strong class="good">{{config.score.threshold_promote}} points</strong>
                        is elegible for promotion to <strong>Elder</strong> at the discretion of leadership.
                    </p>
                </article>
                <article>
                    <header>
                        <h2>Score Calculation</h2>
                    </header>
                    <p>
                        Score is made of two components: <strong>donation score</strong> 
                        and <strong>war participation score</strong>.
                    </p>
                    <h4>Donation Score:</h4>
                    <p>
                        You are expected to donate <strong>{{config.score.min_donations_daily}}
                        cards per day</strong>, on average. If you make more, you will 
                        gain points. If you make fewer, you will lose points. If you have 
                        zero, you will be penalized 
                        <strong class="bad">{{config.score.donations_zero}} points</strong>
                    </p>
                    <h4>War Participation Score:</h4>
                    <table class="rules">
                        <thead>
                            <tr>
                                <th>For each of the last 10 wars, did member...</th>
                                <th>Yes</th>
                                <th>No</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for rule in scoring_rules %}
                            <tr>
                                <td>{{rule.name}}</td>
                                <td class="yes"><strong class="{{rule.yes_status}}">{{"{0:+}".format(rule.yes)}}</strong></td>
                                <td class="no"><strong class="{{rule.no_status}}">{{"{0:+}".format(rule.no)}}</strong></td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </article>
            </div>
        </section>
    </main>

    <footer><div class="inner">
        <ul>
            <li><a rel="external" target="_blank" href="https://github.com/AaronTraas/Clash-Royale-Clan-Tools">Github</a></li>
            <li><a rel="external" target="_blank" href="https://developer.clashroyale.com/">Clash Royale API</a></li>
        </ul>
    </div></footer>

    <a class="github-fork-ribbon right-top" target="_blank" href="https://github.com/AaronTraas/Clash-Royale-Clan-Tools" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    
    <script>
        // requestAnimFrame polyfill
        window.requestAnimationFrame = (function(){
            return  window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame   ||
            window.mozRequestAnimationFrame      ||
            function( callback ){
                window.setTimeout(callback, 1000 / 60);
            };
        })();

        // delay startup of app until first render if possible.
        window.requestAnimationFrame( function() {
            var element = document.createElement( 'script' );
            element.setAttribute( 'src', 'static/crtools.js?version={{version}}' );
            document.body.appendChild( element );
        });
    </script>
</body>
</html>
