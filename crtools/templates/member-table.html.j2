<div class="table-scroll">
    <div class="table-scroll-inner">
        <table id="member-table" width="100%" data-filter="none">
            <thead>
                <tr>
                    <th colspan="2" class="condensed">Member</th>
                    <th data-tooltip="true" class="condensed">
                        Score
                        <div class="tooltip"><strong>Score</strong> is a measurement of a member's overall participation, factoring donations and war performance.</div>
                    </th>
                    <th class="condensed">Trophies</th>
                    <th class="condensed">Dona&shy;tions</th>
                {% for date in war_dates %}
                    <th class="nobr">{{date}}</th>
                {% endfor %}
                </tr>
            </thead>
            <tbody>
            {% for member in members %}
                <tr data-score="{{member.score}}" data-status="{{member.status}}" data-leadership="{{member.leadership}}">
                    <td style="text-align: center">
                        {% if member.clanRank < member.previousClanRank %}
                        <span class="rank-up">
                        {% elif member.clanRank > member.previousClanRank %}
                        <span class="rank-down">
                        {% else %}
                        <span>
                        {% endif %}
                           <strong>{{member.clanRank}}</strong>
                        </span>
                    </td>
                    <td data-tooltip="true">
                        <strong class="condensed">{{member.name}}</strong><br />
                        <small class="member-role">{{member.role}}</small>
                        <div class="tooltip">
                            <dl>
                                <div><dt>Name</dt><dd>{{member.name}}</dd></div>
                                <div><dt>Tag</dt><dd>{{member.tag}}</dd></div>
                                <div><dt>Clan Role</dt><dd>{{member.role}}</dd></div>
                                <div><dt>Clan Score</dt><dd>{{member.score}}</dd></div>
                                <div><dt>XP Level</dt><dd>{{member.expLevel}}</dd></div>
                                <div><dt>Trophies</dt><dd>{{member.trophies}}</dd></div>
                                <div>
                                    <dt>Clan Rank</dt>
                                    <dd>
                                        {{member.clanRank}}
                                    {% if member.clanRank != member.previousClanRank %}
                                        (prev: {{member.previousClanRank}})
                                    {% endif %}          
                                    </dd>
                                </div>
                                <div><dt>Arena</dt><dd>{{member.arena.name}}</dd></div>
                                <div><dt>Donations</dt><dd>{{member.donations}}</dd></div>
                                <div><dt>Trophies</dt><dd>{{member.donationsReceived}}</dd></div>
                            </dl>
                        </div>
                    </td>
                    <td class="score {{member.status}}">
                        <strong>{{member.score}}</strong>
                    </td>
                    {% if member.trophies < min_trophies %}
                    <td class="trophies ok">
                    {% else %}
                    <td class="trophies">
                    {% endif %}          
                        <strong>{{member.trophies}}</strong>
                    </td>
                    <td class="donations {{member.donation_status}}">
                        <strong>{{member.donations}}</strong><br />
                        {% if member.donations_daily > 0 %}
                            <small>{{member.donations_daily}}/day</small>
                        {% endif %}          
                    </td>
                {% for war in member.warlog %}
                    <td class="war {{war.status}}" data-tooltip="true">
                    {% if war.battlesPlayed is defined %}
                        <div data-role="war">
                            <div>
                            {% if war.battlesPlayed > 0 %}
                                {% for battle in range(0, war.battlesPlayed) %}
                                    {% if war.wins >= battle+1 %}
                                    <img class="war-battle" src="static/war-battle-win.svg" />
                                    {% else %}
                                    <img class="war-battle" src="static/war-battle-loss.svg" />
                                    {% endif %}
                                {% endfor %}
                            {% else %}
                                <img class="war-battle" src="static/war-battle-incomplete.svg" />
                            {% endif %}
                            </div>
                        </div>
                        <div class="tooltip">
                            <dl>
                                <div><dt>Collection day battles</dt><dd>{{war.collectionDayBattlesPlayed}}</dd></div>
                                <div><dt>Cards earned</dt><dd>{{war.cardsEarned}}</dd></div>
                                <div><dt>War day battles:</dt><dd>{{war.battlesPlayed}}</dd></div>
                                <div><dt>War day wins:</dt><dd>{{war.wins}}</dd></div>
                            </dl>
                        </div>
                    {% else %}
                        N/A
                        <div class="tooltip">
                            <strong>{{member.name}}</strong> did not participate in this war.
                        </div>
                    {% endif %}          
                    </td>
                {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>