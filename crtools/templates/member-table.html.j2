<div class="table-scroll">
    <div class="table-scroll-inner">
        <table id="member-table" width="100%" data-filter="none">
            <thead>
                <tr>
                    <th colspan="2">Member</th>
                    <th>Score</th>
                    <th>Trophies</th>
                    <th>Dona&shy;tions</th>
                    <th>Current War</th>
                {% for label in war_labels %}
                    <th class="nobr">
                        {{label.date}}
                        <img class="war-league" title="{{label.league.name}}" src="static/images/war-league-{{label.league.id}}.svg" />
                    </th>
                {% endfor %}
                </tr>
            </thead>
            <tbody>
            {% for member in members %}
                <tr data-score="{{member.score}}" data-status="{{member.status}}" data-leadership="{{member.leadership}}" data-vacation="{{member.vacation}}">
                    <td style="text-align: center">
                        {% if member.clanRank < member.previousClanRank %}
                        <span class="rank-up">
                        {% elif member.clanRank > member.previousClanRank %}
                        <span class="rank-down">
                        {% else %}
                        <span>
                        {% endif %}
                           <strong>{{member.clanRank}}</strong>
                        </span>
                    </td>
                    <td data-tooltip="true">
                        <strong>{{member.name}}</strong><br />
                        <small class="member-role">{{member.role}}</small>
                        <div class="tooltip">
                            <dl>
                                <div><dt>Name</dt><dd>{{member.name}}</dd></div>
                                <div><dt>Tag</dt><dd>{{member.tag}}</dd></div>
                                <div><dt>Clan Role</dt><dd>{{member.role}}</dd></div>
                                <div><dt>XP Level</dt><dd>{{member.expLevel}}</dd></div>
                                <div><dt>Arena</dt><dd>{{member.arena.name}}</dd></div>
                            </dl>
                        </div>
                    </td>
                    <td class="score {{member.status}}" data-tooltip="true">
                        <strong>{{member.score}}</strong>
                        <div class="tooltip">
                            <dl>
                                <div><dt>Score from donations</dt><dd>{{"{0:+}".format(member.donationScore)}}</strong></dd></div>
                                <div><dt>Score from war participation</dt><dd>{{"{0:+}".format(member.warScore)}}</strong></dd></div>
                            </dl>
                        </div>
                    </td>
                    <td class="trophies {{member.trophiesStatus}}">
                        {% if 'arena-' not in member.arenaLeague %}
                        <img class="arena-league" title="{{member.arena.name}}" src="static/images/arena-league-{{member.arenaLeague}}.svg" />
                        {% endif %}
                        <strong>{{member.trophies}}</strong>
                    </td>
                    <td class="donations {{member.donationStatus}}" data-tooltip="true">
                        <img src="static/images/cards.svg" />
                        <strong>{{member.donations}}</strong><br />
                        {% if member.donationsDaily > 0 %}
                            <small>{{member.donationsDaily}}/day</small>
                        {% endif %}
                        <div class="tooltip">
                            <dl>
                                <div><dt>Cards given</dt><dd>{{member.donations}}</dd></div>
                                <div><dt>Cards recieved</dt><dd>{{member.donationsReceived}}</dd></div>
                                <div><dt>Donations score</dt><dd>{{"{0:+}".format(member.donationScore)}}</strong></dd></div>
                            </dl>
                        </div>
                    </td>
                    <td class="war {{member.currentWar.status}}">
                    {% if member.currentWar.battlesPlayed is defined %}
                        <div data-role="war">
                            <div>
                            {% if (clan.currentWarState == 'warDay') and (member.currentWar.battlesPlayed > 0) %}
                                {% for battle in range(0, member.currentWar.battlesPlayed) %}
                                    {% if member.currentWar.wins >= battle+1 %}
                                    <img class="war-battle" src="static/images/war-battle-win.svg" />
                                    {% else %}
                                    <img class="war-battle" src="static/images/war-battle-loss.svg" />
                                    {% endif %}
                                {% endfor %}
                            {% else %}
                                <img class="war-battle" src="static/images/war-battle-incomplete.svg" />
                            {% endif %}
                            </div>
                            <div class="war-cards">
                                {{member.currentWar.cardsEarned}}
                            </div>
                        </div>
                    {% else %}
                        N/A
                    {% endif %}
                    </td>
                {% for war in member.warlog %}
                    <td class="war {{war.status}}" data-tooltip="true">
                    {% if war.battlesPlayed is defined %}
                        <div data-role="war">
                            <div>
                            {% if war.battlesPlayed > 0 %}
                                {% for battle in range(0, war.battlesPlayed) %}
                                    {% if war.wins >= battle+1 %}
                                    <img class="war-battle" src="static/images/war-battle-win.svg" />
                                    {% else %}
                                    <img class="war-battle" src="static/images/war-battle-loss.svg" />
                                    {% endif %}
                                {% endfor %}
                            {% else %}
                                <img class="war-battle" src="static/images/war-battle-incomplete.svg" />
                            {% endif %}
                            </div>
                            <div class="war-cards">
                                {{war.cardsEarned}}
                            </div>
                        </div>
                        <div class="tooltip">
                            <dl>
                                <div><dt>War league</dt><dd>{{war.warLeague}}</dd></div>
                                <div><dt>Collection day battles</dt><dd>{{war.collectionDayBattlesPlayed}}</dd></div>
                                <div><dt>Collection day wins</dt><dd>{{war.collectionBattleWins}}</dd></div>
                                <div><dt>Cards earned</dt><dd>{{war.cardsEarned}}</dd></div>
                                <div><dt>War day battles</dt><dd>{{war.battlesPlayed}}</dd></div>
                                <div><dt>War day wins</dt><dd>{{war.wins}}</dd></div>
                                <div><dt>War score</dt><dd>{{"{0:+}".format(war.score)}}</strong></dd></div>
                            </dl>
                        </div>
                    {% else %}
                        N/A
                        <div class="tooltip">
                            <strong>{{member.name}}</strong> did <em>not</em> participate in this war.
                            <dl>
                                <div><dt>War score</dt><dd>{{"{0:+}".format(war.score)}}</strong></dd></div>
                            </dl>
                       </div>
                    {% endif %}
                    </td>
                {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>